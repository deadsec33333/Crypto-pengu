"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3379],{33379:function(e,t,r){r.d(t,{c:function(){return D}});var i=r(11735),o=r(92),n=r(34511),a=r(35087),s=r(10244),u=r(52120),c=r(69159),l=r(79045),h=r(64774),f=r(67729),d=r(48416),p=r(91567),y=r(47543),v=r(98290),m=r(81167),b=r(31756),g=r(9670),Q=r(30678),k=r(41288),w=r(20628),q=r(43152),O=r(63465),I=r(71710),E=r(47637),P=r(88288),R=r(71531),S=Object.prototype.hasOwnProperty,x=Object.create(null),D=function(){function e(e){var t=this;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new P.s(R.Q["queryManager.getDocumentInfo"]||2e3),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new E.B(!1);var r=new h.A(function(e){return t.cache.transformDocument(e)},{cache:!1});this.cache=e.cache,this.link=e.link,this.defaultOptions=e.defaultOptions,this.queryDeduplication=e.queryDeduplication,this.clientAwareness=e.clientAwareness,this.localState=e.localState,this.ssrMode=e.ssrMode,this.assumeImmutableResults=e.assumeImmutableResults;var i=e.documentTransform;this.documentTransform=i?r.concat(i).concat(r):r,this.defaultContext=e.defaultContext||Object.create(null),(this.onBroadcast=e.onBroadcast)&&(this.mutationStore=Object.create(null))}return e.prototype.stop=function(){var e=this;this.queries.forEach(function(t,r){e.stopQueryNoBroadcast(r)}),this.cancelPendingFetches((0,o._K)(26))},e.prototype.cancelPendingFetches=function(e){this.fetchCancelFns.forEach(function(t){return t(e)}),this.fetchCancelFns.clear()},e.prototype.mutate=function(e){return(0,i.mG)(this,arguments,void 0,function(e){var t,r,n,a,s,u,c,l=e.mutation,h=e.variables,p=e.optimisticResponse,y=e.updateQueries,v=e.refetchQueries,m=void 0===v?[]:v,b=e.awaitRefetchQueries,g=void 0!==b&&b,Q=e.update,w=e.onQueryUpdated,q=e.fetchPolicy,O=void 0===q?(null===(u=this.defaultOptions.mutate)||void 0===u?void 0:u.fetchPolicy)||"network-only":q,I=e.errorPolicy,E=void 0===I?(null===(c=this.defaultOptions.mutate)||void 0===c?void 0:c.errorPolicy)||"none":I,P=e.keepRootFields,R=e.context;return(0,i.Jh)(this,function(e){switch(e.label){case 0:if((0,o.kG)(l,27),(0,o.kG)("network-only"===O||"no-cache"===O,28),t=this.generateMutationId(),l=this.cache.transformForLink(this.transform(l)),r=this.getDocumentInfo(l).hasClientExports,h=this.getVariables(l,h),!r)return[3,2];return[4,this.localState.addExportedVariables(l,h,R)];case 1:h=e.sent(),e.label=2;case 2:return n=this.mutationStore&&(this.mutationStore[t]={mutation:l,variables:h,loading:!0,error:null}),a=p&&this.markMutationOptimistic(p,{mutationId:t,document:l,variables:h,fetchPolicy:O,errorPolicy:E,context:R,updateQueries:y,update:Q,keepRootFields:P}),this.broadcastQueries(),s=this,[2,new Promise(function(e,r){return(0,f.s)(s.getObservableFromLink(l,(0,i.pi)((0,i.pi)({},R),{optimisticResponse:a?p:void 0}),h,{},!1),function(e){if((0,d.d)(e)&&"none"===E)throw new k.cA({graphQLErrors:(0,d.K)(e)});n&&(n.loading=!1,n.error=null);var r=(0,i.pi)({},e);return"function"==typeof m&&(m=m(r)),"ignore"===E&&(0,d.d)(r)&&delete r.errors,s.markMutationResult({mutationId:t,result:r,document:l,variables:h,fetchPolicy:O,errorPolicy:E,context:R,update:Q,updateQueries:y,awaitRefetchQueries:g,refetchQueries:m,removeOptimistic:a?t:void 0,onQueryUpdated:w,keepRootFields:P})}).subscribe({next:function(t){s.broadcastQueries(),"hasNext"in t&&!1!==t.hasNext||e(t)},error:function(e){n&&(n.loading=!1,n.error=e),a&&s.cache.removeOptimistic(t),s.broadcastQueries(),r(e instanceof k.cA?e:new k.cA({networkError:e}))}})})]}})})},e.prototype.markMutationResult=function(e,t){var r=this;void 0===t&&(t=this.cache);var o=e.result,n=[],a="no-cache"===e.fetchPolicy;if(!a&&(0,O.c)(o,e.errorPolicy)){if((0,s.GG)(o)||n.push({result:o.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}),(0,s.GG)(o)&&(0,p.O)(o.incremental)){var u=t.diff({id:"ROOT_MUTATION",query:this.getDocumentInfo(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0}),c=void 0;u.result&&(c=(0,s.mT)(u.result,o)),void 0!==c&&(o.data=c,n.push({result:c,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}))}var l=e.updateQueries;l&&this.queries.forEach(function(e,i){var a=e.observableQuery,s=a&&a.queryName;if(s&&S.call(l,s)){var u=l[s],c=r.queries.get(i),h=c.document,f=c.variables,d=t.diff({query:h,variables:f,returnPartialData:!0,optimistic:!1}),p=d.result;if(d.complete&&p){var v=u(p,{mutationResult:o,queryName:h&&(0,y.rY)(h)||void 0,queryVariables:f});v&&n.push({result:v,dataId:"ROOT_QUERY",query:h,variables:f})}}})}if(n.length>0||(e.refetchQueries||"").length>0||e.update||e.onQueryUpdated||e.removeOptimistic){var h=[];if(this.refetchQueries({updateCache:function(t){a||n.forEach(function(e){return t.write(e)});var u=e.update,c=!(0,s.M0)(o)||(0,s.GG)(o)&&!o.hasNext;if(u){if(!a){var l=t.diff({id:"ROOT_MUTATION",query:r.getDocumentInfo(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0});l.complete&&("incremental"in(o=(0,i.pi)((0,i.pi)({},o),{data:l.result}))&&delete o.incremental,"hasNext"in o&&delete o.hasNext)}c&&u(t,o,{context:e.context,variables:e.variables})}a||e.keepRootFields||!c||t.modify({id:"ROOT_MUTATION",fields:function(e,t){var r=t.fieldName,i=t.DELETE;return"__typename"===r?e:i}})},include:e.refetchQueries,optimistic:!1,removeOptimistic:e.removeOptimistic,onQueryUpdated:e.onQueryUpdated||null}).forEach(function(e){return h.push(e)}),e.awaitRefetchQueries||e.onQueryUpdated)return Promise.all(h).then(function(){return o})}return Promise.resolve(o)},e.prototype.markMutationOptimistic=function(e,t){var r=this,n="function"==typeof e?e(t.variables,{IGNORE:x}):e;return n!==x&&(this.cache.recordOptimisticTransaction(function(e){try{r.markMutationResult((0,i.pi)((0,i.pi)({},t),{result:{data:n}}),e)}catch(e){!1!==globalThis.__DEV__&&o.kG.error(e)}},t.mutationId),!0)},e.prototype.fetchQuery=function(e,t,r){return this.fetchConcastWithInfo(e,t,r).concast.promise},e.prototype.getQueryStore=function(){var e=Object.create(null);return this.queries.forEach(function(t,r){e[r]={variables:t.variables,networkStatus:t.networkStatus,networkError:t.networkError,graphQLErrors:t.graphQLErrors}}),e},e.prototype.resetErrors=function(e){var t=this.queries.get(e);t&&(t.networkError=void 0,t.graphQLErrors=[])},e.prototype.transform=function(e){return this.documentTransform.transformDocument(e)},e.prototype.getDocumentInfo=function(e){var t=this.transformCache;if(!t.has(e)){var r={hasClientExports:(0,u.mj)(e),hasForcedResolvers:this.localState.shouldForceResolvers(e),hasNonreactiveDirective:(0,u.FS)(["nonreactive"],e),clientQuery:this.localState.clientQuery(e),serverQuery:(0,c.bi)([{name:"client",remove:!0},{name:"connection"},{name:"nonreactive"}],e),defaultVars:(0,y.O4)((0,y.$H)(e)),asQuery:(0,i.pi)((0,i.pi)({},e),{definitions:e.definitions.map(function(e){return"OperationDefinition"===e.kind&&"query"!==e.operation?(0,i.pi)((0,i.pi)({},e),{operation:"query"}):e})})};t.set(e,r)}return t.get(e)},e.prototype.getVariables=function(e,t){return(0,i.pi)((0,i.pi)({},this.getDocumentInfo(e).defaultVars),t)},e.prototype.watchQuery=function(e){var t=this.transform(e.query);void 0===(e=(0,i.pi)((0,i.pi)({},e),{variables:this.getVariables(t,e.variables)})).notifyOnNetworkStatusChange&&(e.notifyOnNetworkStatusChange=!1);var r=new O.e(this),o=new w.ue({queryManager:this,queryInfo:r,options:e});return o.lastQuery=t,this.queries.set(o.queryId,r),r.init({document:t,observableQuery:o,variables:o.variables}),o},e.prototype.query=function(e,t){var r=this;return void 0===t&&(t=this.generateQueryId()),(0,o.kG)(e.query,29),(0,o.kG)("Document"===e.query.kind,30),(0,o.kG)(!e.returnPartialData,31),(0,o.kG)(!e.pollInterval,32),this.fetchQuery(t,(0,i.pi)((0,i.pi)({},e),{query:this.transform(e.query)})).finally(function(){return r.stopQuery(t)})},e.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},e.prototype.generateRequestId=function(){return this.requestIdCounter++},e.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},e.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},e.prototype.stopQueryInStoreNoBroadcast=function(e){var t=this.queries.get(e);t&&t.stop()},e.prototype.clearStore=function(e){return void 0===e&&(e={discardWatches:!0}),this.cancelPendingFetches((0,o._K)(33)),this.queries.forEach(function(e){e.observableQuery?e.networkStatus=q.Ie.loading:e.stop()}),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(e)},e.prototype.getObservableQueries=function(e){var t=this;void 0===e&&(e="active");var r=new Map,n=new Map,a=new Set;return Array.isArray(e)&&e.forEach(function(e){"string"==typeof e?n.set(e,!1):(0,v.JW)(e)?n.set(t.transform(e),!1):(0,m.s)(e)&&e.query&&a.add(e)}),this.queries.forEach(function(t,i){var o=t.observableQuery,a=t.document;if(o){if("all"===e){r.set(i,o);return}var s=o.queryName;if("standby"===o.options.fetchPolicy||"active"===e&&!o.hasObservers())return;("active"===e||s&&n.has(s)||a&&n.has(a))&&(r.set(i,o),s&&n.set(s,!0),a&&n.set(a,!0))}}),a.size&&a.forEach(function(e){var n=(0,b.X)("legacyOneTimeQuery"),a=t.getQuery(n).init({document:e.query,variables:e.variables}),s=new w.ue({queryManager:t,queryInfo:a,options:(0,i.pi)((0,i.pi)({},e),{fetchPolicy:"network-only"})});(0,o.kG)(s.queryId===n),a.setObservableQuery(s),r.set(n,s)}),!1!==globalThis.__DEV__&&n.size&&n.forEach(function(e,t){e||!1===globalThis.__DEV__||o.kG.warn("string"==typeof t?34:35,t)}),r},e.prototype.reFetchObservableQueries=function(e){var t=this;void 0===e&&(e=!1);var r=[];return this.getObservableQueries(e?"all":"active").forEach(function(i,o){var n=i.options.fetchPolicy;i.resetLastResults(),(e||"standby"!==n&&"cache-only"!==n)&&r.push(i.refetch()),t.getQuery(o).setDiff(null)}),this.broadcastQueries(),Promise.all(r)},e.prototype.setObservableQuery=function(e){this.getQuery(e.queryId).setObservableQuery(e)},e.prototype.startGraphQLSubscription=function(e){var t=this,r=e.query,i=e.fetchPolicy,o=e.errorPolicy,n=void 0===o?"none":o,a=e.variables,s=e.context,u=void 0===s?{}:s,c=e.extensions,l=void 0===c?{}:c;r=this.transform(r),a=this.getVariables(r,a);var h=function(e){return t.getObservableFromLink(r,u,e,l).map(function(o){"no-cache"!==i&&((0,O.c)(o,n)&&t.cache.write({query:r,result:o.data,dataId:"ROOT_SUBSCRIPTION",variables:e}),t.broadcastQueries());var a=(0,d.d)(o),s=(0,k.ls)(o);if(a||s){var u={};if(a&&(u.graphQLErrors=o.errors),s&&(u.protocolErrors=o.extensions[k.YG]),"none"===n||s)throw new k.cA(u)}return"ignore"===n&&delete o.errors,o})};if(this.getDocumentInfo(r).hasClientExports){var f=this.localState.addExportedVariables(r,a,u).then(h);return new g.y(function(e){var t=null;return f.then(function(r){return t=r.subscribe(e)},e.error),function(){return t&&t.unsubscribe()}})}return h(a)},e.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},e.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},e.prototype.removeQuery=function(e){this.fetchCancelFns.delete(e),this.queries.has(e)&&(this.getQuery(e).stop(),this.queries.delete(e))},e.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach(function(e){return e.notify()})},e.prototype.getLocalState=function(){return this.localState},e.prototype.getObservableFromLink=function(e,t,r,o,n){var s,u,c=this;void 0===n&&(n=null!==(s=null==t?void 0:t.queryDeduplication)&&void 0!==s?s:this.queryDeduplication);var h=this.getDocumentInfo(e),d=h.serverQuery,p=h.clientQuery;if(d){var v=this.inFlightLinkObservables,m=this.link,b={query:d,variables:r,operationName:(0,y.rY)(d)||void 0,context:this.prepareContext((0,i.pi)((0,i.pi)({},t),{forceFetch:!n})),extensions:o};if(t=b.context,n){var k=(0,I.S)(d),w=(0,l.B)(r),q=v.lookup(k,w);if(!(u=q.observable)){var O=new Q.X([(0,a.h)(m,b)]);u=q.observable=O,O.beforeNext(function(){v.remove(k,w)})}}else u=new Q.X([(0,a.h)(m,b)])}else u=new Q.X([g.y.of({data:{}})]),t=this.prepareContext(t);return p&&(u=(0,f.s)(u,function(e){return c.localState.runResolvers({document:p,remoteResult:e,context:t,variables:r})})),u},e.prototype.getResultsFromLink=function(e,t,r){var i=e.lastRequestId=this.generateRequestId(),o=this.cache.transformForLink(r.query);return(0,f.s)(this.getObservableFromLink(o,r.context,r.variables),function(n){var a=(0,d.K)(n),s=a.length>0,u=r.errorPolicy;if(i>=e.lastRequestId){if(s&&"none"===u)throw e.markError(new k.cA({graphQLErrors:a}));e.markResult(n,o,r,t),e.markReady()}var c={data:n.data,loading:!1,networkStatus:q.Ie.ready};return s&&"none"===u&&(c.data=void 0),s&&"ignore"!==u&&(c.errors=a,c.networkStatus=q.Ie.error),c},function(t){var r=(0,k.MS)(t)?t:new k.cA({networkError:t});throw i>=e.lastRequestId&&e.markError(r),r})},e.prototype.fetchConcastWithInfo=function(e,t,r,i){var o,n,a=this;void 0===r&&(r=q.Ie.loading),void 0===i&&(i=t.query);var s=this.getVariables(i,t.variables),u=this.getQuery(e),c=this.defaultOptions.watchQuery,l=t.fetchPolicy,h=void 0===l?c&&c.fetchPolicy||"cache-first":l,f=t.errorPolicy,d=void 0===f?c&&c.errorPolicy||"none":f,p=t.returnPartialData,y=t.notifyOnNetworkStatusChange,v=t.context,m=Object.assign({},t,{query:i,variables:s,fetchPolicy:h,errorPolicy:d,returnPartialData:void 0!==p&&p,notifyOnNetworkStatusChange:void 0!==y&&y,context:void 0===v?{}:v}),b=function(e){m.variables=e;var i=a.fetchQueryByPolicy(u,m,r);return"standby"!==m.fetchPolicy&&i.sources.length>0&&u.observableQuery&&u.observableQuery.applyNextFetchPolicy("after-fetch",t),i},g=function(){return a.fetchCancelFns.delete(e)};if(this.fetchCancelFns.set(e,function(e){g(),setTimeout(function(){return o.cancel(e)})}),this.getDocumentInfo(m.query).hasClientExports)o=new Q.X(this.localState.addExportedVariables(m.query,m.variables,m.context).then(b).then(function(e){return e.sources})),n=!0;else{var k=b(m.variables);n=k.fromLink,o=new Q.X(k.sources)}return o.promise.then(g,g),{concast:o,fromLink:n}},e.prototype.refetchQueries=function(e){var t=this,r=e.updateCache,i=e.include,o=e.optimistic,n=void 0!==o&&o,a=e.removeOptimistic,s=void 0===a?n?(0,b.X)("refetchQueries"):void 0:a,u=e.onQueryUpdated,c=new Map;i&&this.getObservableQueries(i).forEach(function(e,r){c.set(r,{oq:e,lastDiff:t.getQuery(r).getDiff()})});var l=new Map;return r&&this.cache.batch({update:r,optimistic:n&&s||!1,removeOptimistic:s,onWatchUpdated:function(e,t,r){var i=e.watcher instanceof O.e&&e.watcher.observableQuery;if(i){if(u){c.delete(i.queryId);var o=u(i,t,r);return!0===o&&(o=i.refetch()),!1!==o&&l.set(i,o),o}null!==u&&c.set(i.queryId,{oq:i,lastDiff:r,diff:t})}}}),c.size&&c.forEach(function(e,r){var i,o=e.oq,n=e.lastDiff,a=e.diff;if(u){if(!a){var s=o.queryInfo;s.reset(),a=s.getDiff()}i=u(o,a,n)}u&&!0!==i||(i=o.refetch()),!1!==i&&l.set(o,i),r.indexOf("legacyOneTimeQuery")>=0&&t.stopQueryNoBroadcast(r)}),s&&this.cache.removeOptimistic(s),l},e.prototype.fetchQueryByPolicy=function(e,t,r){var o=this,a=t.query,s=t.variables,u=t.fetchPolicy,c=t.refetchWritePolicy,l=t.errorPolicy,h=t.returnPartialData,f=t.context,d=t.notifyOnNetworkStatusChange,p=e.networkStatus;e.init({document:a,variables:s,networkStatus:r});var y=function(){return e.getDiff()},v=function(t,r){void 0===r&&(r=e.networkStatus||q.Ie.loading);var u=t.result;!1===globalThis.__DEV__||h||(0,n.D)(u,{})||(0,w.DC)(t.missing);var c=function(e){return g.y.of((0,i.pi)({data:e,loading:(0,q.Oj)(r),networkStatus:r},t.complete?null:{partial:!0}))};return u&&o.getDocumentInfo(a).hasForcedResolvers?o.localState.runResolvers({document:a,remoteResult:{data:u},context:f,variables:s,onlyRunForcedResolvers:!0}).then(function(e){return c(e.data||void 0)}):"none"===l&&r===q.Ie.refetch&&Array.isArray(t.missing)?c(void 0):c(u)},m="no-cache"===u?0:r===q.Ie.refetch&&"merge"!==c?1:2,b=function(){return o.getResultsFromLink(e,m,{query:a,variables:s,context:f,fetchPolicy:u,errorPolicy:l})},Q=d&&"number"==typeof p&&p!==r&&(0,q.Oj)(r);switch(u){default:case"cache-first":var k=y();if(k.complete)return{fromLink:!1,sources:[v(k,e.markReady())]};if(h||Q)return{fromLink:!0,sources:[v(k),b()]};return{fromLink:!0,sources:[b()]};case"cache-and-network":var k=y();if(k.complete||h||Q)return{fromLink:!0,sources:[v(k),b()]};return{fromLink:!0,sources:[b()]};case"cache-only":return{fromLink:!1,sources:[v(y(),e.markReady())]};case"network-only":if(Q)return{fromLink:!0,sources:[v(y()),b()]};return{fromLink:!0,sources:[b()]};case"no-cache":if(Q)return{fromLink:!0,sources:[v(e.getDiff()),b()]};return{fromLink:!0,sources:[b()]};case"standby":return{fromLink:!1,sources:[]}}},e.prototype.getQuery=function(e){return e&&!this.queries.has(e)&&this.queries.set(e,new O.e(this,e)),this.queries.get(e)},e.prototype.prepareContext=function(e){void 0===e&&(e={});var t=this.localState.prepareContext(e);return(0,i.pi)((0,i.pi)((0,i.pi)({},this.defaultContext),t),{clientAwareness:this.clientAwareness})},e}()}}]);