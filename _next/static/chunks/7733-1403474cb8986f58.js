"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7733],{49928:function(e,t,n){n.d(t,{bK:function(){return M}});var s=n(16427);function r(e,t){let n=function(e){let t=[];for(let n=0;n<e.length;++n)for(let s=n+1;s<e.length;++s)for(let r of u(e[n],e[s]))r.parentIndex=[n,s],t.push(r);return t}(e),s=n.filter(t=>e.every(e=>i(t,e)<e.radius+1e-10)),r=0,a=0,h=[];if(s.length>1){let t=o(s);for(let e=0;e<s.length;++e){let n=s[e];n.angle=Math.atan2(n.x-t.x,n.y-t.y)}s.sort((e,t)=>t.angle-e.angle);let n=s[s.length-1];for(let t=0;t<s.length;++t){let u=s[t];a+=(n.x+u.x)*(u.y-n.y);let o={x:(u.x+n.x)/2,y:(u.y+n.y)/2},f=null;for(let t=0;t<u.parentIndex.length;++t)if(n.parentIndex.includes(u.parentIndex[t])){let s=e[u.parentIndex[t]],r=Math.atan2(u.x-s.x,u.y-s.y),l=Math.atan2(n.x-s.x,n.y-s.y),a=l-r;a<0&&(a+=2*Math.PI);let h=l-a/2,x=i(o,{x:s.x+s.radius*Math.sin(h),y:s.y+s.radius*Math.cos(h)});x>2*s.radius&&(x=2*s.radius),(null==f||f.width>x)&&(f={circle:s,width:x,p1:u,p2:n,large:x>s.radius,sweep:!0})}null!=f&&(h.push(f),r+=l(f.circle.radius,f.width),n=u)}}else{let t=e[0];for(let n=1;n<e.length;++n)e[n].radius<t.radius&&(t=e[n]);let n=!1;for(let s=0;s<e.length;++s)if(i(e[s],t)>Math.abs(t.radius-e[s].radius)){n=!0;break}n?r=a=0:(r=t.radius*t.radius*Math.PI,h.push({circle:t,p1:{x:t.x,y:t.y+t.radius},p2:{x:t.x-1e-10,y:t.y+t.radius},width:2*t.radius,large:!0,sweep:!0}))}return a/=2,t&&(t.area=r+a,t.arcArea=r,t.polygonArea=a,t.arcs=h,t.innerPoints=s,t.intersectionPoints=n),r+a}function l(e,t){return e*e*Math.acos(1-t/e)-(e-t)*Math.sqrt(t*(2*e-t))}function i(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function a(e,t,n){return n>=e+t?0:n<=Math.abs(e-t)?Math.PI*Math.min(e,t)*Math.min(e,t):l(e,e-(n*n-t*t+e*e)/(2*n))+l(t,t-(n*n-e*e+t*t)/(2*n))}function u(e,t){let n=i(e,t),s=e.radius,r=t.radius;if(n>=s+r||n<=Math.abs(s-r))return[];let l=(s*s-r*r+n*n)/(2*n),a=Math.sqrt(s*s-l*l),u=e.x+l*(t.x-e.x)/n,o=e.y+l*(t.y-e.y)/n,h=-(t.y-e.y)*(a/n),f=-(t.x-e.x)*(a/n);return[{x:u+h,y:o-f},{x:u-h,y:o+f}]}function o(e){let t={x:0,y:0};for(let n of e)t.x+=n.x,t.y+=n.y;return t.x/=e.length,t.y/=e.length,t}function h(e,t={}){t.maxIterations=t.maxIterations||500;let n=t.initialLayout||x,r=t.lossFunction||g,l=function(e,t={}){let n=t.distinct,s=e.map(e=>Object.assign({},e));function r(e){return e.join(";")}if(n){let e=new Map;for(let t of s)for(let n=0;n<t.sets.length;n++){let s=String(t.sets[n]);e.set(s,t.size+(e.get(s)||0));for(let r=n+1;r<t.sets.length;r++){let n=String(t.sets[r]),l=`${s};${n}`,i=`${n};${s}`;e.set(l,t.size+(e.get(l)||0)),e.set(i,t.size+(e.get(i)||0))}}for(let t of s)t.sets.length<3&&(t.size=e.get(r(t.sets)))}let l=[],i=new Set;for(let e of s)if(1===e.sets.length)l.push(e.sets[0]);else if(2===e.sets.length){let t=e.sets[0],n=e.sets[1];i.add(r(e.sets)),i.add(r([n,t]))}l.sort((e,t)=>e===t?0:e<t?-1:1);for(let e=0;e<l.length;++e){let t=l[e];for(let n=e+1;n<l.length;++n){let e=l[n];i.has(r([t,e]))||s.push({sets:[t,e],size:0})}}return s}(e,t),i=n(l,t),a=Object.keys(i),u=[];for(let e of a)u.push(i[e].x),u.push(i[e].y);let o=(0,s.nelderMead)(e=>{let t={};for(let n=0;n<a.length;++n){let s=a[n];t[s]={x:e[2*n],y:e[2*n+1],radius:i[s].radius}}return r(t,l)},u,t).x;for(let e=0;e<a.length;++e){let t=a[e];i[t].x=o[2*e],i[t].y=o[2*e+1]}return i}function f(e,t,n){return Math.min(e,t)*Math.min(e,t)*Math.PI<=n+1e-10?Math.abs(e-t):(0,s.bisect)(s=>a(e,t,s)-n,0,e+t)}function x(e,t={}){let n=function(e,t){let n=t&&t.lossFunction?t.lossFunction:g,s={},r={};for(let t of e)if(1===t.sets.length){let e=t.sets[0];s[e]={x:1e10,y:1e10,rowid:s.length,size:t.size,radius:Math.sqrt(t.size/Math.PI)},r[e]=[]}for(let t of e=e.filter(e=>2===e.sets.length)){let e=null!=t.weight?t.weight:1,n=t.sets[0],l=t.sets[1];t.size+1e-10>=Math.min(s[n].size,s[l].size)&&(e=0),r[n].push({set:l,size:t.size,weight:e}),r[l].push({set:n,size:t.size,weight:e})}let l=[];function i(e,t){return t.size-e.size}Object.keys(r).forEach(e=>{let t=0;for(let n=0;n<r[e].length;++n)t+=r[e][n].size*r[e][n].weight;l.push({set:e,size:t})}),l.sort(i);let a={};function o(e){return e.set in a}function h(e,t){s[t].x=e.x,s[t].y=e.y,a[t]=!0}h({x:0,y:0},l[0].set);for(let t=1;t<l.length;++t){let a=l[t].set,g=r[a].filter(o),y=s[a];if(g.sort(i),0===g.length)throw"ERROR: missing pairwise overlap information";let d=[];for(var x=0;x<g.length;++x){let e=s[g[x].set],t=f(y.radius,e.radius,g[x].size);d.push({x:e.x+t,y:e.y}),d.push({x:e.x-t,y:e.y}),d.push({y:e.y+t,x:e.x}),d.push({y:e.y-t,x:e.x});for(let n=x+1;n<g.length;++n){let r=s[g[n].set],l=f(y.radius,r.radius,g[n].size),i=u({x:e.x,y:e.y,radius:t},{x:r.x,y:r.y,radius:l});d.push(...i)}}let c=1e50,p=d[0];for(let t of d){s[a].x=t.x,s[a].y=t.y;let r=n(s,e);r<c&&(c=r,p=t)}h(p,a)}return s}(e,t),r=t.lossFunction||g;if(e.length>=8){let l=function(e,t={}){let n=t.restarts||10,r=[],l={};for(let t of e)1===t.sets.length&&(l[t.sets[0]]=r.length,r.push(t));let{distances:i,constraints:a}=function(e,t,n){let r=(0,s.zerosM)(t.length,t.length),l=(0,s.zerosM)(t.length,t.length);return e.filter(e=>2===e.sets.length).forEach(e=>{let s=n[e.sets[0]],i=n[e.sets[1]],a=f(Math.sqrt(t[s].size/Math.PI),Math.sqrt(t[i].size/Math.PI),e.size);r[s][i]=r[i][s]=a;let u=0;e.size+1e-10>=Math.min(t[s].size,t[i].size)?u=1:e.size<=1e-10&&(u=-1),l[s][i]=l[i][s]=u}),{distances:r,constraints:l}}(e,r,l),u=(0,s.norm2)(i.map(s.norm2))/i.length;i=i.map(e=>e.map(e=>e/u));let o=(e,t)=>(function(e,t,n,s){for(let e=0;e<t.length;++e)t[e]=0;let r=0;for(let l=0;l<n.length;++l){let i=e[2*l],a=e[2*l+1];for(let u=l+1;u<n.length;++u){let o=e[2*u],h=e[2*u+1],f=n[l][u],x=s[l][u],g=(o-i)*(o-i)+(h-a)*(h-a),y=Math.sqrt(g),d=g-f*f;x>0&&y<=f||x<0&&y>=f||(r+=2*d*d,t[2*l]+=4*d*(i-o),t[2*l+1]+=4*d*(a-h),t[2*u]+=4*d*(o-i),t[2*u+1]+=4*d*(h-a))}}return r})(e,t,i,a),h=null;for(let e=0;e<n;++e){let e=(0,s.zeros)(2*i.length).map(Math.random),n=(0,s.conjugateGradient)(o,e,t);(!h||n.fx<h.fx)&&(h=n)}let x=h.x,g={};for(let e=0;e<r.length;++e){let t=r[e];g[t.sets[0]]={x:x[2*e]*u,y:x[2*e+1]*u,radius:Math.sqrt(t.size/Math.PI)}}if(t.history)for(let e of t.history)(0,s.scale)(e.x,u);return g}(e,t);r(l,e)+1e-8<r(n,e)&&(n=l)}return n}function g(e,t){let n=0;for(let s of t){let t;if(1!==s.sets.length){if(2===s.sets.length){let n=e[s.sets[0]],r=e[s.sets[1]];t=a(n.radius,r.radius,i(n,r))}else t=r(s.sets.map(t=>e[t]));n+=(null!=s.weight?s.weight:1)*(t-s.size)*(t-s.size)}}return n}function y(e,t){let n=0;for(let s of t){let t;if(1===s.sets.length)continue;if(2===s.sets.length){let n=e[s.sets[0]],r=e[s.sets[1]];t=a(n.radius,r.radius,i(n,r))}else t=r(s.sets.map(t=>e[t]));let l=null!=s.weight?s.weight:1,u=Math.log((t+1)/(s.size+1));n+=l*u*u}return n}function d(e){let t=t=>({max:e.reduce((e,n)=>Math.max(e,n[t]+n.radius),Number.NEGATIVE_INFINITY),min:e.reduce((e,n)=>Math.min(e,n[t]-n.radius),Number.POSITIVE_INFINITY)});return{xRange:t("x"),yRange:t("y")}}function c(e){let t={};for(let n of e)t[n.setid]=n;return t}function p(e){return Object.keys(e).map(t=>Object.assign(e[t],{setid:t}))}function m(e,t,n){let s=t[0].radius-i(t[0],e);for(let n=1;n<t.length;++n){let r=t[n].radius-i(t[n],e);r<=s&&(s=r)}for(let t=0;t<n.length;++t){let r=i(n[t],e)-n[t].radius;r<=s&&(s=r)}return s}function M(e,t={}){let{lossFunction:n,layoutFunction:l=h,normalize:a=!0,orientation:u=Math.PI/2,orientationOrder:f,width:x=600,height:M=350,padding:z=15,scaleToFit:I=!1,symmetricalTextCentre:R=!1,distinct:b,round:w=2}=t,P=l(e,{lossFunction:"default"!==n&&n?"logRatio"===n?y:n:g,distinct:b});a&&(P=function(e,t,n){null==t&&(t=Math.PI/2);let s=p(e).map(e=>Object.assign({},e)),r=function(e){function t(e){return e.parent!==e&&(e.parent=t(e.parent)),e.parent}e.forEach(e=>{e.parent=e});for(let n=0;n<e.length;++n)for(let s=n+1;s<e.length;++s){let r=e[n].radius+e[s].radius;i(e[n],e[s])+1e-10<r&&function(e,n){let s=t(e),r=t(n);s.parent=r}(e[s],e[n])}let n=new Map;for(let s=0;s<e.length;++s){let r=t(e[s]).parent.setid;n.has(r)||n.set(r,[]),n.get(r).push(e[s])}return e.forEach(e=>{delete e.parent}),Array.from(n.values())}(s);for(let e of r){!function(e,t,n){if(null==n?e.sort((e,t)=>t.radius-e.radius):e.sort(n),e.length>0){let t=e[0].x,n=e[0].y;for(let s of e)s.x-=t,s.y-=n}if(2===e.length&&i(e[0],e[1])<Math.abs(e[1].radius-e[0].radius)&&(e[1].x=e[0].x+e[0].radius-e[1].radius-1e-10,e[1].y=e[0].y),e.length>1){let n=Math.atan2(e[1].x,e[1].y)-t,s=Math.cos(n),r=Math.sin(n);for(let t of e){let e=t.x,n=t.y;t.x=s*e-r*n,t.y=r*e+s*n}}if(e.length>2){let n=Math.atan2(e[2].x,e[2].y)-t;for(;n<0;)n+=2*Math.PI;for(;n>2*Math.PI;)n-=2*Math.PI;if(n>Math.PI){let t=e[1].y/(1e-10+e[1].x);for(let n of e){var s=(n.x+t*n.y)/(1+t*t);n.x=2*s-n.x,n.y=2*s*t-n.y}}}}(e,t,n);let s=d(e);e.size=(s.xRange.max-s.xRange.min)*(s.yRange.max-s.yRange.min),e.bounds=s}r.sort((e,t)=>t.size-e.size);let l=(s=r[0]).bounds,a=(l.xRange.max-l.xRange.min)/50;function u(e,t,n){let r,i;if(!e)return;let u=e.bounds;if(t)r=l.xRange.max-u.xRange.min+a;else{r=l.xRange.max-u.xRange.max;let e=(u.xRange.max-u.xRange.min)/2-(l.xRange.max-l.xRange.min)/2;e<0&&(r+=e)}if(n)i=l.yRange.max-u.yRange.min+a;else{i=l.yRange.max-u.yRange.max;let e=(u.yRange.max-u.yRange.min)/2-(l.yRange.max-l.yRange.min)/2;e<0&&(i+=e)}for(let t of e)t.x+=r,t.y+=i,s.push(t)}let o=1;for(;o<r.length;)u(r[o],!0,!1),u(r[o+1],!1,!0),u(r[o+2],!0,!0),o+=3,l=d(s);return c(s)}(P,u,f));let j=function(e,t,n,s,r){let l,i;let a=p(e);t-=2*s,n-=2*s;let{xRange:u,yRange:o}=d(a);if(u.max===u.min||o.max===o.min)return console.log("not scaling solution: zero size detected"),e;if(r){let e=2*Math.sqrt(r/Math.PI);l=t/e,i=n/e}else l=t/(u.max-u.min),i=n/(o.max-o.min);let h=Math.min(i,l),f=(t-(u.max-u.min)*h)/2,x=(n-(o.max-o.min)*h)/2;return c(a.map(e=>({radius:h*e.radius,x:s+f+(e.x-u.min)*h,y:s+x+(e.y-o.min)*h,setid:e.setid})))}(P,x,M,z,I),k=function(e,t,n){let l={},a=function(e){let t={},n=Object.keys(e);for(let e of n)t[e]=[];for(let s=0;s<n.length;s++){let r=n[s],l=e[r];for(let a=s+1;a<n.length;++a){let s=n[a],u=e[s],o=i(l,u);o+u.radius<=l.radius+1e-10?t[s].push(r):o+l.radius<=u.radius+1e-10&&t[r].push(s)}}return t}(e);for(let u=0;u<t.length;++u){let h=t[u].sets,f={},x={};for(let e=0;e<h.length;++e){f[h[e]]=!0;let t=a[h[e]];for(let e=0;e<t.length;++e)x[t[e]]=!0}let g=[],y=[];for(let t in e)t in f?g.push(e[t]):t in x||y.push(e[t]);let d=function e(t,n,l){let a=[];for(let e of t)a.push({x:e.x,y:e.y}),a.push({x:e.x+e.radius/2,y:e.y}),a.push({x:e.x-e.radius/2,y:e.y}),a.push({x:e.x,y:e.y+e.radius/2}),a.push({x:e.x,y:e.y-e.radius/2});let u=a[0],h=m(a[0],t,n);for(let e=1;e<a.length;++e){let s=m(a[e],t,n);s>=h&&(u=a[e],h=s)}let f=(0,s.nelderMead)(e=>-1*m({x:e[0],y:e[1]},t,n),[u.x,u.y],{maxIterations:500,minErrorDelta:1e-10}).x,x={x:l?0:f[0],y:f[1]},g=!0;for(let e of t)if(i(x,e)>e.radius){g=!1;break}for(let e of n)if(i(x,e)<e.radius){g=!1;break}if(g)return x;if(1==t.length)return{x:t[0].x,y:t[0].y};let y={};return(r(t,y),0===y.arcs.length)?{x:0,y:-1e3,disjoint:!0}:1==y.arcs.length?{x:y.arcs[0].circle.x,y:y.arcs[0].circle.y}:n.length?e(t,[]):o(y.arcs.map(e=>e.p1))}(g,y,n);l[h]=d,d.disjoint&&t[u].size>0&&console.log("WARNING: area "+h+" not represented on screen")}return l}(j,e,R),E=new Map(Object.keys(j).map(e=>[e,{set:e,x:j[e].x,y:j[e].y,radius:j[e].radius}])),N=e.map(e=>{let t=e.sets.map(e=>E.get(e)),n=function(e){if(0===e.length)return[];let t={};return r(e,t),t.arcs}(t),s=function(e,t){if(0===e.length)return"M 0 0";let n=Math.pow(10,t||0),s=null!=t?e=>Math.round(e*n)/n:e=>e;if(1==e.length){let t=e[0].circle;return function(e,t,n){let s=[];return s.push("\nM",e,t),s.push("\nm",-n,0),s.push("\na",n,n,0,1,0,2*n,0),s.push("\na",n,n,0,1,0,-(2*n),0),s.join(" ")}(s(t.x),s(t.y),s(t.radius))}let r=["\nM",s(e[0].p2.x),s(e[0].p2.y)];for(let t of e){let e=s(t.circle.radius);r.push("\nA",e,e,0,t.large?1:0,t.sweep?1:0,s(t.p1.x),s(t.p1.y))}return r.join(" ")}(n,w);return{circles:t,arcs:n,path:s,area:e,has:new Set(e.sets)}});return N.map(({circles:e,arcs:t,path:n,area:s})=>({data:s,text:k[s.sets],circles:e,arcs:t,path:n,distinctPath:n+function(e){let t="";for(let n of N)n.has.size>e.length&&e.every(e=>n.has.has(e))&&(t+=" "+n.path);return t}(s.sets)}))}}}]);